<!DOCTYPE html> 
<html> 
<head> 
<meta charset="utf-8" /> 
<title>简单的html5 File测试 for pic2base64</title> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- 让IE系列浏览器识别html5标签 -->
<!--[if lt IE 9]>
<script src="../assets/js/html5shiv.js"></script>
<![endif]-->
<link rel="stylesheet" href="../assets/less/pandora.css">
<link rel="stylesheet" href="../assets/less/docs.css">
<style> 
</style> 
<script> 
window.onload = function(){ 
    var input = document.getElementById("demo_input"); 
    var result= document.getElementById("result"); 
    var img_area = document.getElementById("img_area"); 
    if ( typeof(FileReader) === 'undefined' ){ 
        result.innerHTML = "抱歉，你的浏览器不支持 FileReader，请使用现代浏览器操作！"; 
        input.setAttribute( 'disabled','disabled' ); 
    } else { 
        input.addEventListener( 'change',readFile,false );
    } 
}

function readFile(){ 
    var file = this.files[0]; 
    //这里我们判断下类型如果不是图片就返回 去掉就可以上传任意文件 
    if(!/image\/\w+/.test(file.type)){ 
        alert("请确保文件为图像类型"); 
        return false; 
    } 
    var reader = new FileReader(); 
    reader.readAsDataURL(file); 
    reader.onload = function(e){ 
        result.innerHTML = '<img src="'+this.result+'" alt=""/>'; 
        img_area.innerHTML = '<div class="sitetip">图片img标签展示：</div><img src="'+this.result+'" alt=""/>'; 
    } 
}
    
</script> 
</head> 
<body> 
<div class="wrap">

    <h1>将图片转化为data:image base64格式</h1>
    <p>注意：不支持IE6/7</p>
    <input type="file" value="sdgsdg" id="demo_input" /> 
    <textarea id="result" rows="20" style="width:96%" ></textarea> 
    <p id="img_area"></p> 
    
    <h3>对此你有什么看法：</h3>
    <div id="uyan_frame"></div>
</div>
<!-- UY BEGIN -->
<script type="text/javascript">
var uyan_config = {
    'title':'前端开发框架 #pandora#', 
    'du':'pandoraui.com'
};
</script>
<script type="text/javascript" id="UYScript" src="http://v1.uyan.cc/js/iframe.js?UYUserId=0" async=""></script>
<!-- UY END -->
</body> 
</html>